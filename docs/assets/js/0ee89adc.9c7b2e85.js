"use strict";(self.webpackChunkcreator_companion_docs=self.webpackChunkcreator_companion_docs||[]).push([[19],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return h}});var o=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=o.createContext({}),c=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(a),h=n,g=d["".concat(l,".").concat(h)]||d[h]||u[h]||r;return a?o.createElement(g,i(i({ref:t},p),{},{components:a})):o.createElement(g,i({ref:t},p))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var c=2;c<r;c++)i[c]=a[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5689:function(e,t,a){a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return u}});var o=a(7462),n=a(3366),r=(a(7294),a(3905)),i=["components"],s={id:"convert-unitypackage",title:"How To Convert Your Assets to a VPM Package",hide_title:!0},l=void 0,c={unversionedId:"guides/convert-unitypackage",id:"guides/convert-unitypackage",title:"How To Convert Your Assets to a VPM Package",description:"Starting Point",source:"@site/docs/guides/convert-unitypackage.md",sourceDirName:"guides",slug:"/guides/convert-unitypackage",permalink:" /guides/convert-unitypackage",tags:[],version:"current",frontMatter:{id:"convert-unitypackage",title:"How To Convert Your Assets to a VPM Package",hide_title:!0},sidebar:"mainSidebar",previous:{title:"VRC Quick Launcher",permalink:" /tools/vrc-quick-launcher"}},p={},u=[{value:"Starting Point",id:"starting-point",level:2},{value:"Changes Needed",id:"changes-needed",level:2},{value:"Package Maker Tool",id:"package-maker-tool",level:2},{value:"Customizing Your Package",id:"customizing-your-package",level:2},{value:"Troubleshooting Migration Issues",id:"troubleshooting-migration-issues",level:2},{value:"Converting Asset Paths",id:"converting-asset-paths",level:3},{value:"Converting to a Resource",id:"converting-to-a-resource",level:4},{value:"Using GUIDs",id:"using-guids",level:4},{value:"Other Issues",id:"other-issues",level:3}],d={toc:u};function h(e){var t=e.components,s=(0,n.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"how-to-convert-your-assets-to-a-vpm-package"},"How To Convert Your Assets to a VPM Package"),(0,r.kt)("h2",{id:"starting-point"},"Starting Point"),(0,r.kt)("p",null,"You've made an Editor Tool, Prefab or something else which is meant to be used alongside the VRChat SDK. You distribute it as a .unitypackage or .zip file which you and other users import into their projects after importing all the related SDK packages like the Worlds SDK and UdonSharp."),(0,r.kt)("h2",{id:"changes-needed"},"Changes Needed"),(0,r.kt)("p",null,"In order to work as a VPM Package, your code and assets need some changes. The ",(0,r.kt)("a",{parentName:"p",href:"#package-maker-tool"},"Package Maker")," tool will handle a lot of this, but not everything:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Be completely separated into Editor and Runtime folders. Anything that uses UnityEditor classes needs to be in the Editor folder."),(0,r.kt)("li",{parentName:"ol"},"Have a ",(0,r.kt)("a",{parentName:"li",href:"vpm/packages#package-format"},"compatible Package Manifest")," which includes the vpmDependencies for the related VRChat SDK packages."),(0,r.kt)("li",{parentName:"ol"},'Replace any paths hardcoded to a path "Assets/YourPackageName" to use your Package path instead - see ',(0,r.kt)("a",{parentName:"li",href:"#converting-asset-paths"},"Converting Asset Paths")," below."),(0,r.kt)("li",{parentName:"ol"},"Provide Assembly Definition files for all the scripts in your package.")),(0,r.kt)("h2",{id:"package-maker-tool"},"Package Maker Tool"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/vrchat-community/vpm-package-maker/releases/download/0.1.0/com.vrchat.tools.package-maker-0.1.0.zip"},"Download the Package Maker Tool")),(0,r.kt)("p",null,"We provide this tool to ease the transition. The steps below will guide you in making a new Project to create and manage a VPM-compatible package from existing assets."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Use the Creator Companion (currently need to use the Closed Beta version) to create a new project based on the VRChat SDKs that you'll need. For example, if you have a tool that requires UdonSharp, make a new UdonSharp project.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Open the new project in Unity.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Import your package into this new project, into the Assets folder as you would if it were a .unitypackage-style project."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Imported Assets Folder",src:a(7871).Z,width:"336",height:"122"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Add the Package Maker Tool to your project. You can simply unzip it into the "Packages" folder of this new project, or you can add it to your ',(0,r.kt)("a",{parentName:"p",href:"vpm/packages#user-packages"},"User Packages")," and add it through the VPM. Note that the ",(0,r.kt)("strong",{parentName:"p"},"VRChatCreatorCompanion-Beta")," saves its settings, templates, user packages, etc in a different spot than the Release version, so this change will not make it appear in your regular VCC app.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Open the Package Maker Tool window from the menu option ",(0,r.kt)("inlineCode",{parentName:"p"},"VRChat SDK / Utilities / Package Maker"),". "),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Package Maker Window",src:a(7040).Z,width:"469",height:"385"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'In the "Project" panel, find the parent folder with all your packages\' assets from within the Assets folder, and Drag and drop it into the "Target Folder" field of the window.'),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Drag and Drop Assets Folder",src:a(147).Z,width:"568",height:"109"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Enter an ID for your package in the Package Maker's \"Package ID\" field. The standard practice for is reverse domain notation like com.vrchat.packagename, using a domain you own. It needs to be unique across VRChat to play nice with other packages, so if you don't own a domain you can try your username.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'If your package requires any VRChat SDK packages, choose the most fitting one from the "Related VRChat Package" dropdown.')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Once you have a valid Target Folder and Package ID chosen, the "Convert Assets to Package" button will be enabled. Press it now.')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The tool will present a confirmation dialog about the permanent changes it's about to make. Read through them and confirm it to perform the migration or cancel it to go back and change something."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Confirmation Dialog",src:a(4829).Z,width:"366",height:"147"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'After confirming, a progress bar will appear as the migration is performed. First, the tool will create the proper file and folder layout for your package within your project\'s "Packages" directory. Then it will move all the files into their corresponding folders. Anything that was in an "Editor" folder in your Assets, even if it was nested down several layers, will be moved into the top-level Editor folder in your package. All other files will be moved into the Runtime folder.')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"If you have Auto-Refresh turned off in Unity, you will need to Refresh at this point by pressing Ctrl-R. At this point, your package ",(0,r.kt)("em",{parentName:"p"},"may"),' be all migrated and properly working. You can safely remove the Package Maker Tool and related "PackageMakerWindowData.asset" file from your project.'))),(0,r.kt)("p",null,"If your project has errors at this point, you may need to do some ",(0,r.kt)("a",{parentName:"p",href:"#troubleshooting-migration-issues"},"troubleshooting"),"."),(0,r.kt)("h2",{id:"customizing-your-package"},"Customizing Your Package"),(0,r.kt)("p",null,"Once your package has been created, you can modify the Name, Description etc by selecting the 'package.json' file in the Project window from ",(0,r.kt)("inlineCode",{parentName:"p"},"Packages/YourPackageName/package.json"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Manifest in the Inspector",src:a(9269).Z,width:"494",height:"527"})),(0,r.kt)("p",null,"You can change the Display Name (ie VRChat - Worlds instead of com.vrchat.worlds), version, description, unity package dependencies, etc. here. If you change the 'Name' of the package, then your Assembly References might break, since they refer to the name of your package entered when it was migrated."),(0,r.kt)("h2",{id:"troubleshooting-migration-issues"},"Troubleshooting Migration Issues"),(0,r.kt)("h3",{id:"converting-asset-paths"},"Converting Asset Paths"),(0,r.kt)("p",null,"If your package expects to find and load files from itself, those paths may need to be updated. For example, if you have an Editor Window which loads a stylesheet, you might have the following code :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'var styleSheet = AssetDatabase.LoadAssetAtPath<StyleSheet>("Assets/MyPackage/Editor/MyPackageStyle.uss");\n')),(0,r.kt)("p",null,"This will no longer work because that file is no longer in the Assets folder. There are two ways to handle this - you can convert the item to a Resource, or convert the path to work from within your package. Here are examples of both approaches."),(0,r.kt)("h4",{id:"converting-to-a-resource"},"Converting to a Resource"),(0,r.kt)("p",null,'Resources can be loaded from any folder without knowing the actual path. Unity looks in every folder called "Resources" within both your Assets and Packages folders.'),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},'Create a folder called "Resources" within our new Package folder, under the top-level "Editor" folder.'),(0,r.kt)("li",{parentName:"ol"},'Move the file "MyPackageStyle.uss" to this resources folder.'),(0,r.kt)("li",{parentName:"ol"},"Switch from ",(0,r.kt)("inlineCode",{parentName:"li"},"AssetDatabase.LoadAssetAtPath")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"Resources.Load")," like this:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'var styleSheet = Resources.Load<StyleSheet>("MyPackageStyle");\n')),(0,r.kt)("p",null,"Note that the filename has the extension removed above - so if any of your resources share the same name with different extensions, you'll need to rename one of them."),(0,r.kt)("h4",{id:"using-guids"},"Using GUIDs"),(0,r.kt)("p",null,"Figure out the GUID of your asset and then ask the AssetDatabase to convert from GUID to AssetPath like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c#"},'string styleSheetPath = AssetDatabase.GUIDToAssetPath("de965059f7f21034b8c112bfc7a0dc5f");\nvar styleSheet = AssetDatabase.LoadAssetAtPath<StyleSheet>(styleSheetPath);\n')),(0,r.kt)("h3",{id:"other-issues"},"Other Issues"),(0,r.kt)("p",null,"If you come across a change needed due to the migration, ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/vrchat-community/vpm-package-maker/issues"},"file an issue here")," so we can add the information to this page!"))}h.isMDXComponent=!0},4829:function(e,t,a){t.Z=a.p+"assets/images/confirm-d776e94800afe54a59deb6eb3ebca302.png"},147:function(e,t,a){t.Z=a.p+"assets/images/drag-drop-folder-0b324119ac34fdc31e33b7d27bddd1b2.png"},7871:function(e,t,a){t.Z=a.p+"assets/images/folder-imported-cb39cfcdd81884ce2719e6a849fb9a27.png"},9269:function(e,t,a){t.Z=a.p+"assets/images/manifest-inspector-5e51b232959c2fdbed6f0eae6a2f9465.png"},7040:function(e,t,a){t.Z=a.p+"assets/images/window-371c2ee4cd55288b5ad2d6f6d4cf9def.png"}}]);